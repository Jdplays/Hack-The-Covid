# HackTheCovid
## Purpose
The Idea is an internal positioning system that will utilise wifi to check how well groups of people are socially distancing inside an enclosed area. The system could be installed in a pub/bar, shop or any other enclosed area in which people gather for an extended period of time. When the system is online, it will use the signal strength of connected devices to determine their location through the use of multiple access points and triangulation. If a large group of people are standing close to one another, it can alert the staff of a “Hot Zone”, where they can go out and disperse these people.

## System Design
So the overall system design is that we have ‘n’ number of access points depending on the size and shape of the space and we also have one “Master” Computer/Controller. Let's take a square room of size 5M by 5M. As with triangulation, you need at least 3 points to get a location but as this is a square room, we might as well put in 4 (one in each corner) to maximize accuracy. You will then have your controller which can simply be a raspberry Pi. The controller, well controls all the Access points and gives them commands along with pulling data down. In This room, any device that is connected to the internet can be tracked. 

## Trilateration
I Talked a bit about trilateration above, but how does it work? It's simple, you have a number of fixed points (in our case access points). Each point knows where it is in “space” and how far away it is from the target (in our case a person's phone). So if you have one point, that means you have a radius around the point. The user can then be anywhere on that line. If you add a second point, you can draw another circle, this will narrow it down to two possible points. Once you add the third point and draw its radius circle, all circles should intersect at one point. That point is where the device is. Then adding more devices will make the location more accurate. I have created an image that demonstrates the scenario above (5M by 5M room with 4 access points, one in each corner). See below:

## Prototyping
I did some prototyping as a proof of concept for this project. The prototype doesn't fully work but it shows that it could work. The current prototype is able to calculate the distance between an access point and any device which is connected to it. For the prototype, I am using a Ubiquiti Unifi AP AC Pro. I can use any device such as iPhone, iPad, samsung, etc… I have used the python programming language to write my code in. I selected python because i originally planned on using a raspberry pi as my access point (python runs well on raspberry pi’s). However, the on board wifi chip didn't have some of the features i was looking for. The prototype is just for proof of concept and does not represent what a final production product would be.
Constraints and Fixes
Along the way, I encountered many obstacles. Firstly I tried using two raspberry pi’s to make a mesh network and use them as my Access Points. I was able to set them up as a mesh, however, the issue came when trying to get signal strength from them. As i was just using the built in wifi chip, it was really only designed for connecting to wifi and not putting out wifi. This caused some issues which resulted in me not being able to access the data I needed. So I scrapped the raspberry pi’s and moved on to use Ubiquiti’s access points which I have installed around my house. That was great, i could now get all the data i wanted and more. The next issue arose when I wanted to get distances from more that one access point. As you know, when a device is connected to a Wireless network, it is only connected to one AP at a time. So I need a way of making the client switch. Now the issue is that according to the IEEE regulations, you cannot force a client to switch AP’s so i had to think outside the box and “nudge” the client to switch by raising the MinRSSI value. RSSI is the Received Signal strength indication is basically just another form of signal strength. MinRSSI referes the minimum RSSI of a device that will be allowed to connect to the AP. So if you turn this all the way up to where the connection has to be pretty much perfect, no devices will be able to connect. So to make a client switch AP’s, I would raise the MinRSSI way up on one device and lower it on the other, making the device switch for me. This is easy to do in the Ubiquiti web interface but another story to do it automatically. To do it automatically, you need to first download the config file from the AP, then update it to change your values (MinRSSI in this case), then re upload it to the AP, SSH into the AP and tell it to apply the changes and finally reboot the AP. The whole process takes about 2 minutes but i think it could be dramatically reduced when using an Access point that isn't as locked down as this one. Apart from those, there are not that many big issues.


## Production System
In a production system, i would probably build my own access point and use a Raspberry pi for it but instead of using the onboard wifi chip, i would add a custom one in the form of a hat. This could allow us to cut the price in half and would also give us more control in parts like the updating of the config file. Another area I would look into is WIFI 6. While researching for this, I came across a paper which discussed a new protocol in wifi 6 which would allow Access Points to sort of negotiate with a client and tell them to switch Access points. This would solve the switching problem entirely and make the system a lot more stable and quick. I would have liked to test this out but i don't have any wifi 6 capable devices or access points to try it with. If i were to create this in a production environment, i would definitely look into this.

## Conclusion
To Conclude, I think with the right hardware and software, this system could really work and help out with tracking people indoors to see if they are socially distanced. Even though this was designed with COVID and Social distancing in mind, the system could easily be implemented in other ways. A simpler version of the system could include an access point in each room of a building and would allow you to track how many people are in each room and how they move around the building. It could be implemented in an airport to track how people move through it and where maybe congestion builds up and choke points appear. The data collected can be analysed and used to generate behavioural patterns for entire cities of how people move about. Really this system could be used for a lot of applications whether it be for COVID or not. In an ever changing world that is becoming more and more data driven, the data collected by a system like this could be invaluable to businesses and governments across the world. This makes this a really interesting project that I will probably continue to work on after the hackathon is over.

